<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AlephLearn â€¢ Chat</title>

  <!-- keep your base styles (buttons, inputs, modals, nav) -->
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="styles1.css" />
  <link rel="icon" href="data:," />

  <style>
    :root{
      --bg-1:#f6f9fc; --bg-2:#eef3f8;
      --ink:#0f172a; --ink-soft:#6b7280;
      --border:rgba(2,6,23,.08);
      --brand:#3b82f6; --brand-2:#2563eb;
      --bubble:#ffffff; --bubble-own:#e9f1ff;
      --shadow:0 10px 30px rgba(2,6,23,.06);
      --radius-outer:16px; --radius-inner:14px;
    }

    /* page background */
    body{margin:0; color:var(--ink); background:linear-gradient(180deg,var(--bg-1),var(--bg-2));}

    /* keep your site header as-is */
    .container{padding:0;}

    /* ===== LAYOUT (sidebar fixed height, chat fills, only messages scroll) ===== */
    .page-wrap{
      display:grid; grid-template-columns:304px 1fr; gap:20px;
      height:calc(100vh - 64px); /* your top nav height */
      padding:18px 22px 14px;
    }

    /* ===== SIDEBAR ===== */
    .sidebar{
      background:#fff; border:1px solid var(--border); border-radius:var(--radius-outer);
      box-shadow:var(--shadow); display:flex; flex-direction:column; min-height:0;
    }
    .side-head{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 16px; border-bottom:1px solid var(--border);
    }
    .side-title{font-weight:700; font-size:15px; letter-spacing:.2px;}
    .side-actions{padding:12px 14px; border-bottom:1px solid var(--border);}
    .side-actions .input{
      width:100%; border-radius:12px; padding:10px 12px; font-size:14px;
    }
    .side-actions .select{margin-top:8px; width:100%;}
    .new-btn{
      width:100%; margin-top:10px; border:none; cursor:pointer;
      background:linear-gradient(45deg,var(--brand),var(--brand-2)); color:#fff;
      font-weight:700; border-radius:12px; padding:10px 12px;
    }
    .sg-list{list-style:none; margin:0; padding:10px; overflow:auto; min-height:0;}
    .sg-item{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding:12px; border-radius:12px; cursor:pointer;
    }
    .sg-item:hover{background:rgba(59,130,246,.06);}
    .sg-item.active{outline:2px solid rgba(59,130,246,.35); background:#f6faff;}
    .sg-left{display:flex; align-items:center; gap:10px;}
    .sg-badge{
      width:36px;height:36px;border-radius:12px;background:#e8f5ff;color:#0b3b7a;
      display:flex;align-items:center;justify-content:center;font-weight:800;letter-spacing:.5px;
    }
    .sg-name{font-weight:700;}
    .sg-sub{font-size:12px;color:var(--ink-soft);}

    /* ===== CHAT CARD ===== */
    .chat-card{
      background:#fff; border:1px solid var(--border); border-radius:var(--radius-outer);
      box-shadow:var(--shadow); display:flex; flex-direction:column; min-width:0; min-height:0;
    }

    /* header (large title left, typing + online right) */
    .chat-head{
      padding:16px 20px; border-bottom:1px solid var(--border);
      background:linear-gradient(90deg,rgba(255,255,255,.96),rgba(250,253,255,.92));
      display:flex; align-items:center; justify-content:space-between;
    }
    .room-title{
      font-size:24px; font-weight:800; letter-spacing:-.3px;
      display:flex; align-items:center; gap:10px;
    }
    .room-dot{width:10px;height:10px;border-radius:50%;background:#22c55e;box-shadow:0 0 0 3px rgba(34,197,94,.18);}
    #roomSub{margin-top:2px; font-size:11px; color:var(--ink-soft); text-transform:uppercase; letter-spacing:1px;}
    .head-right{font-size:13px; color:var(--ink-soft); display:flex; align-items:center; gap:14px;}
    .online-pill{
      background:#eef4ff; color:#1d4ed8; font-weight:700; padding:4px 10px; border-radius:999px; font-size:12px;
    }

    /* pinned bar */
    #pinnedArea{
      display:none; background:#eff6ff; color:#0b2f64;
      padding:10px 16px; border-bottom:1px solid var(--border);
    }
    #pinnedArea strong{color:#1d4ed8;}

    /* messages area */
    #messageList{
      flex:1; min-height:0; overflow:auto;
      padding:18px; background:linear-gradient(180deg,#fbfdff 10%, #f6f9fc 100%);
      display:flex; flex-direction:column; gap:12px;
    }

    /* message bubble row */
    .msg{display:flex; gap:12px; max-width:900px;}
    .msg.mine{align-self:flex-end; flex-direction:row-reverse;}
    .msg .msg-avatar{
      width:36px;height:36px;border-radius:50%;
      background:#2b6cff; color:#fff; display:flex;align-items:center;justify-content:center;
      font-weight:800; font-size:13px; flex-shrink:0;
    }
    .msg-bubble{
      background:var(--bubble); border:1px solid var(--border);
      border-radius:16px; padding:12px 14px; box-shadow:0 6px 14px rgba(15,23,42,.04);
    }
    .msg.mine .msg-bubble{
      background:var(--bubble-own); border-color:rgba(37,99,235,.25);
    }
    .msg-head{display:flex; align-items:center; gap:8px; margin-bottom:6px;}
    .msg-author{font-weight:700; font-size:13px;}
    .msg-time{font-size:11px; color:var(--ink-soft);}
    .msg-text{font-size:14px; color:#1f2937; line-height:1.45;}
    .msg.is-pinned .msg-bubble{outline:1px dashed rgba(250,204,21,.45); outline-offset:2px;}

    /* composer fixed at bottom of card */
    .composer{
      border-top:1px solid var(--border); background:#fff; padding:12px 16px;
      display:flex; align-items:center; gap:10px;
    }
    .plain-btn{
      width:36px;height:36px;border:none;border-radius:50%;cursor:pointer;
      background:#f0f5ff; color:#6b7280;
    }
    .plain-btn:hover{background:#e4ecff;}
    .input-wrap{flex:1;}
    #messageInput{
      width:100%; border:1px solid var(--border); background:#f7fbff; color:#0f172a;
      border-radius:24px; padding:12px 14px; font-size:14px;
    }
    #messageInput:focus{outline:none; box-shadow:0 0 0 3px rgba(37,99,235,.12);}
    #sendBtn{
      border:none; border-radius:24px; padding:10px 14px; color:#fff; cursor:pointer;
      background:linear-gradient(45deg,var(--brand),var(--brand-2));
    }

    /* floating pinned tray (kept for compatibility; hidden by default) */
    #pinnedTray{
      position:fixed;left:24px;right:24px;top:76px;z-index:30;
      background:#1e293b;color:#fde047;border:1px solid rgba(253,224,71,.25);
      padding:10px 14px;border-radius:10px;display:none;
    }

    @media (max-width: 980px){
      .page-wrap{grid-template-columns:1fr; height:calc(100vh - 64px);}
      .sidebar{order:2;max-height:42vh;}
      .chat-card{order:1;}
      .msg{max-width:85%;}
    }
  </style>
</head>

<body>
  <!-- your top navigation (unchanged) -->
  <header class="nav">
    <div class="nav-inner">
      <div class="brand"><div class="logo">A</div> AlephLearn</div>
      <button class="nav-toggle" aria-label="Toggle menu" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>
      <nav class="links">
        <a href="index.html">Dashboard</a>
        <a href="doubts.html">Doubts</a>
        <a class="active" href="chat.html">Chat</a>
        <a href="quizzes.html">Quizzes</a>
        <a href="previous-papers.html">Previous Papers</a>
        <a href="leaderboard.html">Leaderboard</a>
        <a href="profile.html">Profile</a>
      </nav>
      <div class="avatar">JS</div>
    </div>
  </header>

  <!-- Content directly under header (no title block) -->
  <main>
    <section class="page-wrap">
      <!-- ===== SIDEBAR ===== -->
      <aside class="sidebar">
        <div class="side-head">
          <div class="side-title">Study Groups</div>
          <button id="newRoomBtn" class="new-btn" style="width:auto;padding:8px 12px;">+ New</button>
        </div>
        <div class="side-actions">
          <input id="roomSearch" class="input" placeholder="Search groups..." />
          <select id="subjectSelect" class="select">
            <option value="cs">CS</option>
            <option value="math">Math</option>
            <option value="physics">Physics</option>
            <option value="english">English</option>
          </select>
          <!-- optional full-width new button (mobile) -->
          <button class="new-btn" style="display:none">+ New Study Group</button>
        </div>
        <ul id="groupList" class="sg-list">
          <!-- chat.js populates li.sg-item (kept same ID) -->
        </ul>
      </aside>

      <!-- ===== CHAT ===== -->
      <section class="chat-card">
        <header class="chat-head">
          <div>
            <div class="room-title">
              <span class="room-dot"></span>
              <span id="roomTitle">Java Programming</span>
            </div>
            <div id="roomSub">Computer Science</div>
          </div>
          <div class="head-right">
            <span id="typingHint">Sarah is typingâ€¦</span>
            <span class="online-pill"><span id="onlineCount">12</span> online</span>
          </div>
        </header>

        <!-- pinned bar -->
        <div id="pinnedArea">
          <strong>ðŸ“Œ Pinned:</strong>
          <span id="pinnedList"></span>
        </div>

        <!-- messages (only scrolling area) -->
        <div id="messageList" aria-live="polite"></div>

        <!-- composer fixed at card bottom -->
        <footer class="composer">
          <div id="replyBar" style="display:none; margin-right:6px;"></div>
          <button class="plain-btn" type="button" title="Attach">ðŸ“Ž</button>
          <button class="plain-btn" type="button" title="Emoji">ðŸ˜Š</button>
          <div class="input-wrap">
            <input id="messageInput" type="text" placeholder="Type your messageâ€¦ (Press / for commands)" />
          </div>
          <button id="sendBtn" type="button">Send âž¤</button>
        </footer>
      </section>
    </section>
  </main>

  <!-- Modals (unchanged, IDs preserved) -->
  <div id="roomModal" class="modal" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.6);z-index:9999;">
    <div class="card" style="width:min(520px,90%);padding:20px;background:#111827;border-radius:16px;">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
        <h3 style="margin:0;">Create Study Group</h3>
        <button id="closeModal" class="icon-btn">âœ–</button>
      </div>
      <div style="display:grid;gap:12px;">
        <label>Room Title
          <input id="roomTitleInput" class="input" placeholder="e.g., Java Programming" />
        </label>
        <label>Subject
          <select id="roomSubject" class="input">
            <option value="cs">CS</option>
            <option value="math">Math</option>
            <option value="physics">Physics</option>
            <option value="english">English</option>
          </select>
        </label>
        <button id="createRoom" class="btn" style="margin-top:10px;">Create</button>
      </div>
    </div>
  </div>

  <div id="editModal" class="al-modal" style="display:none">
    <div class="al-modal__backdrop"></div>
    <div class="al-modal__card">
      <div class="al-modal__header">
        <h3>Edit message</h3>
        <button class="al-x" data-close>âœ–</button>
      </div>
      <div class="al-modal__body">
        <input id="editInput" class="al-input" placeholder="Update your textâ€¦" />
      </div>
      <div class="al-modal__footer">
        <button class="al-btn al-btn--ghost" data-cancel>Cancel</button>
        <button class="al-btn" data-ok>Save</button>
      </div>
    </div>
  </div>

  <div id="confirmModal" class="al-modal" style="display:none">
    <div class="al-modal__backdrop"></div>
    <div class="al-modal__card">
      <div class="al-modal__header">
        <h3 id="confirmTitle">Delete message</h3>
        <button class="al-x" data-close>âœ–</button>
      </div>
      <div class="al-modal__body">
        <p id="confirmMessage" style="margin:0;color:#cbd5e1">Are you sure you want to delete this message?</p>
      </div>
      <div class="al-modal__footer" style="gap:8px;justify-content:flex-end;">
        <button class="al-btn al-btn--ghost" data-cancel>Cancel</button>
        <button class="al-btn al-btn--danger" data-ok>Delete</button>
      </div>
    </div>
  </div>

  <!-- Mobile nav toggle (unchanged) -->
  <script>
    (function(){
      const nav=document.querySelector('.nav');
      const btn=document.querySelector('.nav-toggle');
      const links=document.querySelector('.links');
      if(!nav||!btn||!links) return;
      function close(){nav.classList.remove('open');document.body.classList.remove('nav-open');btn.setAttribute('aria-expanded','false');}
      btn.addEventListener('click',()=>{const open=!nav.classList.contains('open');nav.classList.toggle('open',open);document.body.classList.toggle('nav-open',open);btn.setAttribute('aria-expanded',open?'true':'false');});
      links.addEventListener('click',e=>{if(e.target.tagName==='A') close();});
      addEventListener('resize',()=>{if(innerWidth>860) close();});
    })();

    /* Auto-scroll to bottom on new messages (UI only) */
    (function(){
      const list=document.getElementById('messageList'); if(!list) return;
      const toBottom=()=>{list.scrollTop=list.scrollHeight;};
      new MutationObserver(toBottom).observe(list,{childList:true});
      addEventListener('load',toBottom);
    })();
  </script>

  <!-- Your existing chat logic; selectors/IDs unchanged -->
  <script src="chat.js"></script>
</body>
</html>
